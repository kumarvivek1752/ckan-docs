"use strict";(self.webpackChunkckan_docs=self.webpackChunkckan_docs||[]).push([[799],{2627:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var r=t(5893),a=t(1151);const i={sidebar_position:1},s="install Schemming on CKAN",l={id:"schemming/Installation",title:"install Schemming on CKAN",description:"in this section we will learn how to install Schemming on CKAN",source:"@site/docs/schemming/Installation.md",sourceDirName:"schemming",slug:"/schemming/Installation",permalink:"/ckan-docs/schemming/Installation",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/schemming/Installation.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Schemming with CKAN",permalink:"/ckan-docs/category/schemming-with-ckan"},next:{title:"Fluent with CKAN",permalink:"/ckan-docs/category/fluent-with-ckan"}},o={},d=[{value:"in this section we will learn how to install Schemming on CKAN",id:"in-this-section-we-will-learn-how-to-install-schemming-on-ckan",level:3},{value:"What you&#39;ll need",id:"what-youll-need",level:3},{value:"Installation with Docker",id:"installation-with-docker",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"install-schemming-on-ckan",children:"install Schemming on CKAN"}),"\n",(0,r.jsx)(n.h3,{id:"in-this-section-we-will-learn-how-to-install-schemming-on-ckan",children:"in this section we will learn how to install Schemming on CKAN"}),"\n",(0,r.jsx)(n.h3,{id:"what-youll-need",children:"What you'll need"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.ckan.org/en/2.9/maintaining/installing/index.html",children:"CKAN"})," version 2.9 or above:"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ckan/ckanext-scheming.git",children:"ckanext-scheming"})," compatible with CKAN 2.9.6 and above."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ckan/ckanext-scheming?tab=readme-ov-file#ckanext-scheming",children:"official documentation"})," of ckanext-scheming."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"installation-with-docker",children:"Installation with Docker"}),"\n",(0,r.jsx)(n.p,{children:"To install ckanext-scheming copy paste below code in your docker file."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\r\n### Scheming ###\r\nRUN  pip3 install -e 'git+https://github.com/ckan/ckanext-scheming.git@master#egg=ckanext-scheming'\r\n\r\nCOPY translate.json /srv/app/src/ckanext-scheming/ckanext/scheming\r\n\r\nCOPY package_form.html /srv/app/src/ckanext-scheming/ckanext/scheming/templates/scheming/package/snippets/package_form.html\r\n\n"})}),"\n",(0,r.jsxs)(n.p,{children:["add below code in your ",(0,r.jsx)(n.code,{children:"ckan.ini"})," file"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"scheming.dataset_schemas = ckanext.scheming:translate.json\r\nscheming.presets = ckanext.scheming:presets.json\n"})}),"\n",(0,r.jsxs)(n.p,{children:["your ",(0,r.jsx)(n.code,{children:"translate.json"})," file should look like this"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="translate.json"',children:'{\r\n    "scheming_version": 2,\r\n    "dataset_type": "formpages",\r\n    "about": "A reimplementation of the default CKAN dataset schema",\r\n    "about_url": "http://github.com/ckan/ckanext-scheming",\r\n    "dataset_fields": [\r\n        {\r\n            "start_form_page": {\r\n                "title": "Required Fields",\r\n                "description": "These fields provide detailed metadata about the dataset."\r\n            },\r\n            "field_name": "title",\r\n            "label": "Title",\r\n            "preset": "title",\r\n            "form_placeholder": "eg. A descriptive title"\r\n        },\r\n        {\r\n            "field_name": "name",\r\n            "label": "URL",\r\n            "preset": "dataset_slug",\r\n            "form_placeholder": "eg. my-dataset"\r\n        },\r\n        {\r\n            "field_name": "owner_org",\r\n            "label": "Organization",\r\n            "preset": "dataset_organization"\r\n        },\r\n        {\r\n            "start_form_page": {\r\n                "title": "English",\r\n                "description": "These fields provide detailed metadata about the dataset."\r\n            },\r\n            "field_name": "en_title",\r\n            "label": "English Dataset Title",\r\n            "preset": "title",\r\n            "form_placeholder": "eg. A descriptive title"\r\n        },\r\n        {\r\n            "field_name": "notes",\r\n            "label": "English Description",\r\n            "form_snippet": "markdown.html",\r\n            "form_placeholder": "eg. Some useful notes about the data"\r\n        },\r\n        {\r\n            "start_form_page": {\r\n                "title": "French dataset",\r\n                "description": "These fields provide detailed metadata about the dataset."\r\n            },\r\n            "field_name": "fr_title",\r\n            "label": "Freanch Dataset Title",\r\n            "preset": "title",\r\n            "form_placeholder": "eg. A descriptive title"\r\n        },\r\n        {\r\n            "field_name": "fr_notes",\r\n            "label": "French Description",\r\n            "form_snippet": "markdown.html",\r\n            "form_placeholder": "eg. Some useful notes about the data"\r\n        },\r\n        {\r\n            "start_form_page": {\r\n                "title": "Spanish dataset",\r\n                "description": "These fields provide detailed metadata about the dataset."\r\n            },\r\n            "field_name": "es_title",\r\n            "label": "Spanish Dataset Title",\r\n            "preset": "title",\r\n            "form_placeholder": "eg. A descriptive title"\r\n        },\r\n        {\r\n            "field_name": "es_notes",\r\n            "label": "Spanish Description",\r\n            "form_snippet": "markdown.html",\r\n            "form_placeholder": "eg. Some useful notes about the data"\r\n        },\r\n        {\r\n            "start_form_page": {\r\n                "title": "Russian dataset",\r\n                "description": "These fields provide detailed metadata about the dataset."\r\n            },\r\n            "field_name": "ru_title",\r\n            "label": "Russian Dataset Title",\r\n            "preset": "title",\r\n            "form_placeholder": "eg. A descriptive title"\r\n        },\r\n        {\r\n            "field_name": "ru_notes",\r\n            "label": "Russian Description",\r\n            "form_snippet": "markdown.html",\r\n            "form_placeholder": "eg. Some useful notes about the data"\r\n        },\r\n        {\r\n            "start_form_page": {\r\n                "title": "Chinese dataset",\r\n                "description": "These fields provide detailed metadata about the dataset."\r\n            },\r\n            "field_name": "zh_title",\r\n            "label": "Chinese Dataset Title",\r\n            "preset": "title",\r\n            "form_placeholder": "eg. A descriptive title"\r\n        },\r\n        {\r\n            "field_name": "zh_notes",\r\n            "label": "Chinese Description",\r\n            "form_snippet": "markdown.html",\r\n            "form_placeholder": "eg. Some useful notes about the data"\r\n        },\r\n        {\r\n            "start_form_page": {\r\n                "title": "Arabic dataset",\r\n                "description": "These fields provide detailed metadata about the dataset."\r\n            },\r\n            "field_name": "ar_title",\r\n            "label": "Arabic Dataset Title",\r\n            "preset": "title",\r\n            "form_placeholder": "eg. A descriptive title"\r\n        },\r\n        {\r\n            "field_name": "ar_notes",\r\n            "label": "Arabic Description",\r\n            "form_snippet": "markdown.html",\r\n            "form_placeholder": "eg. Some useful notes about the data"\r\n        }\r\n    ],\r\n    "resource_fields": [\r\n        {\r\n            "field_name": "url",\r\n            "label": "URL",\r\n            "preset": "resource_url_upload"\r\n        },\r\n        {\r\n            "field_name": "name",\r\n            "label": "Name",\r\n            "form_placeholder": "eg. January 2011 Gold Prices"\r\n        },\r\n        {\r\n            "field_name": "description",\r\n            "label": "Description",\r\n            "form_snippet": "markdown.html",\r\n            "form_placeholder": "Some useful notes about the data"\r\n        },\r\n        {\r\n            "field_name": "format",\r\n            "label": "Format",\r\n            "preset": "resource_format_autocomplete"\r\n        }\r\n    ]\r\n}\r\n\n'})}),"\n",(0,r.jsxs)(n.p,{children:["your ",(0,r.jsx)(n.code,{children:"package_form.html"})," file should look like this"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jinja2",metastring:'title="package_form.html"',children:"{% extends 'package/new_package_form.html' %}\r\n\r\n{% block stages %}\r\n{%- set pages = h.scheming_get_dataset_form_pages(dataset_type) -%}\r\n{%- if pages -%}\r\n{%- set active_page = data.get('_form_page', 1) | int -%}\r\n\r\n\r\n<ol class=\"stages stage-1\">\r\n    {%- for p in pages -%}\r\n    {%-set pg_url = h.url_for(dataset_type +\r\n    ('.scheming_edit_page' if form_style == 'edit' else '.scheming_new_page'),\r\n    package_type=dataset_type,\r\n    id=data.name or data.id,\r\n    page=loop.index) -%}\r\n\r\n    <li class=\"{{\r\n          'first ' if loop.first else ''}}{{\r\n          'active ' if loop.index == active_page else '' }}\"\r\n        style=\"width:{{ 100 / (loop.length + (0 if form_style == 'edit' else 1)) }}%\">\r\n        <span class=\"highlight\" style=\"padding-right:0\">\r\n            {% if '//' not in pg_url.strip() %}\r\n            <a href=\"{{\r\n              h.url_for(dataset_type +\r\n                  ('.scheming_edit_page' if form_style == 'edit' else '.scheming_new_page'),\r\n                package_type=dataset_type,\r\n                id=data.name or data.id,\r\n                page=loop.index)\r\n            }}\">{{ h.scheming_language_text(p.title) }}</a>\r\n            {%\r\n            else %}{{ h.scheming_language_text(p.title) }}{% endif %}\r\n        </span>\r\n    </li>\r\n    {%- endfor -%}\r\n    {%- if form_style != 'edit' -%}\r\n    <li class=\"last {{ s2 }}\" style=\"width:{{ 100 / (pages | length + 1) }}%\">\r\n        {% if s2 != 'complete' %}\r\n        <span class=\"highlight\">{{ _('Add data') }}</span>\r\n        {% else %}\r\n        {% if s1 == 'active' %}\r\n        {# stage 1 #}\r\n        <button class=\"highlight\" name=\"save\" value=\"go-resources\" type=\"submit\">{{ _('Add data') }}</button>\r\n        {% else %}\r\n        {% link_for _('Add data'), named_route='dataset.new', class_=\"highlight\" %}\r\n        {% endif %}\r\n        {% endif %}\r\n    </li>\r\n    {%- endif -%}\r\n</ol>\r\n{%- else -%}\r\n{{ super() }}\r\n{%- endif -%}\r\n{% endblock %}\r\n\r\n{% block errors %}\r\n{%- if errors -%}\r\n{%- set schema = h.scheming_get_dataset_schema(dataset_type) -%}\r\n{%- snippet 'scheming/snippets/errors.html',\r\nerrors=errors, fields=schema.dataset_fields,\r\nentity_type='dataset', object_type=dataset_type -%}\r\n{%- endif -%}\r\n{% endblock %}\r\n\r\n{% block basic_fields %}\r\n{%- if not dataset_type -%}\r\n<p>\r\n    dataset_type not passed to template. your version of CKAN\r\n    might not be compatible with ckanext-scheming\r\n</p>\r\n{%- endif -%}\r\n\r\n{%- set schema = h.scheming_get_dataset_schema(dataset_type) -%}\r\n{%- set pages = h.scheming_get_dataset_form_pages(dataset_type) -%}\r\n{%- if pages -%}\r\n{%- set active_page = data.get('_form_page', 1) | int -%}\r\n{%- set fields = pages[active_page - 1]['fields'] -%}\r\n{%- else -%}\r\n{%- set fields = schema.dataset_fields -%}\r\n{%- endif -%}\r\n{%- for field in fields -%}\r\n{%- if field.form_snippet is not none -%}\r\n{%- if field.field_name not in data %}\r\n{# Set the field default value before rendering but only if\r\nit doesn't already exist in data which would mean the form\r\nhas been submitted. #}\r\n{% if field.default_jinja2 %}\r\n{% do data.__setitem__(\r\nfield.field_name,\r\nh.scheming_render_from_string(field.default_jinja2)) %}\r\n{% elif field.default %}\r\n{% do data.__setitem__(field.field_name, field.default) %}\r\n{% endif %}\r\n{% endif -%}\r\n{%- snippet 'scheming/snippets/form_field.html',\r\nfield=field,\r\ndata=data,\r\nerrors=errors,\r\nlicenses=c.licenses,\r\nentity_type='dataset',\r\nobject_type=dataset_type\r\n-%}\r\n{%- endif -%}\r\n{%- endfor -%}\r\n\r\n{%- if pages -%}\r\n<input type=\"hidden\" name=\"_ckan_phase\" value=\"{{ active_page }}\" />\r\n{%- elif 'resource_fields' not in schema -%}\r\n\x3c!-- force controller to skip resource-editing step for this type --\x3e\r\n<input type=\"hidden\" name=\"_ckan_phase\" value=\"\" />\r\n{%- endif -%}\r\n\r\n{% endblock %}\r\n\r\n{% block metadata_fields %}\r\n{% endblock %}\r\n\r\n{% block save_button_text %}\r\n{%- set pages = h.scheming_get_dataset_form_pages(dataset_type) -%}\r\n{%- if pages and form_style == 'edit' -%}\r\n{%- set active_page = data.get('_form_page', 1) | int -%}\r\n{{ _('Update {page}').format(page=h.scheming_language_text(pages[active_page-1].title)) }}\r\n{%- elif pages -%}\r\n{{ _('Next') }}\r\n{%- else -%}\r\n{{ super() }}\r\n{%- endif -%}\r\n{% endblock %}\r\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>s});var r=t(7294);const a={},i=r.createContext(a);function s(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);