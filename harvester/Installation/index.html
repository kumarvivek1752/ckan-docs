<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-harvester/Installation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">install harvester and configure on CKAN | CKAN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/ckan-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://github.com/ckan-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://github.com/ckan-docs/harvester/Installation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="install harvester and configure on CKAN | CKAN Docs"><meta data-rh="true" name="description" content="You have just learned the How to install and configure AZURE AD on CKAN"><meta data-rh="true" property="og:description" content="You have just learned the How to install and configure AZURE AD on CKAN"><link data-rh="true" rel="icon" href="/ckan-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/ckan-docs/harvester/Installation"><link data-rh="true" rel="alternate" href="https://github.com/ckan-docs/harvester/Installation" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/ckan-docs/harvester/Installation" hreflang="x-default"><link rel="stylesheet" href="/ckan-docs/assets/css/styles.ccc7bd04.css">
<script src="/ckan-docs/assets/js/runtime~main.d76a2937.js" defer="defer"></script>
<script src="/ckan-docs/assets/js/main.b819afaa.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ckan-docs/"><div class="navbar__logo"><img src="/ckan-docs/img/ckan.png" alt="CKAN Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ckan-docs/img/ckan.png" alt="CKAN Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">CKAN Notes</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ckan-docs/">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kumarvivek1752/ckan-docs/blob/main/CKAN_Notes.pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">DownloadPdf<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ckan-docs/">CKAN Notes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ckan-docs/category/azure-ad-with-ckan">Azure AD with CKAN</a><button aria-label="Expand sidebar category &#x27;Azure AD with CKAN&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/ckan-docs/category/harvester-with-ckan">Harvester with CKAN</a><button aria-label="Collapse sidebar category &#x27;Harvester with CKAN&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ckan-docs/harvester/Installation">install harvester and configure on CKAN</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ckan-docs/category/schemming-with-ckan">Schemming with CKAN</a><button aria-label="Expand sidebar category &#x27;Schemming with CKAN&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ckan-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/ckan-docs/category/harvester-with-ckan"><span itemprop="name">Harvester with CKAN</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">install harvester and configure on CKAN</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>install harvester and configure on CKAN</h1>
<p>You have just learned the <strong>How to install and configure AZURE AD on CKAN</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="in-this-section-we-will-learn-how-to-install-and-configure-harvester-on-ckan">in this section we will learn how to install and configure harvester on CKAN<a href="#in-this-section-we-will-learn-how-to-install-and-configure-harvester-on-ckan" class="hash-link" aria-label="Direct link to in this section we will learn how to install and configure harvester on CKAN" title="Direct link to in this section we will learn how to install and configure harvester on CKAN">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-youll-need">What you&#x27;ll need<a href="#what-youll-need" class="hash-link" aria-label="Direct link to What you&#x27;ll need" title="Direct link to What you&#x27;ll need">​</a></h3>
<ul>
<li><a href="https://docs.ckan.org/en/2.9/maintaining/installing/index.html" target="_blank" rel="noopener noreferrer">CKAN</a> version 2.9 or above:</li>
<li><a href="https://github.com/ckan/ckanext-harvest.git" target="_blank" rel="noopener noreferrer">ckanext-harvest</a> compatible with CKAN 2.9.6 and above.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation-with-docker">Installation with Docker<a href="#installation-with-docker" class="hash-link" aria-label="Direct link to Installation with Docker" title="Direct link to Installation with Docker">​</a></h2>
<p>To install ckanext-harvest copy paste below code in your docker file.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### harvester ###</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pip3 install -e &#x27;git+https://github.com/ckan/ckanext-harvest.git@master#egg=ckanext-harvest&#x27; &amp;&amp; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pip3 install -r ${APP_DIR}/src/ckanext-harvest/pip-requirements.txt &amp;&amp; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pip3 install -r ${APP_DIR}/src/ckanext-harvest/dev-requirements.txt </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># # Install Supervisor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apk update &amp;&amp; apk add --no-cache python3-dev py3-setuptools supervisor dcron busybox-extras</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pip install --upgrade supervisor schedule future</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># # Copy Supervisor configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY harvesting.conf /etc/supervisord.d/harvesting.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY harvester.py /srv/app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>your <code>harvesting.conf</code> file should look like this</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[program:ckan_gather_consumer]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">command=ckan harvester gather-consumer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user=root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">numprocs=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stdout_logfile=/var/log/gather_consumer.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stderr_logfile=/var/log/gather_consumer.err.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">autostart=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">autorestart=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">startsecs=10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[program:ckan_fetch_consumer]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">command=ckan harvester fetch-consumer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user=root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">numprocs=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stdout_logfile=/var/log/fetch_consumer.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stderr_logfile=/var/log/fetch_consumer.err.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">autostart=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">autorestart=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">startsecs=10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>your <code>harvester.py</code> file should look like this</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import schedule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import subprocess</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def run_harvester():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Redirect logs to a file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    with open(&quot;harvester.log&quot;, &quot;a&quot;) as log_file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Execute the command &quot;ckan harvester run&quot; and redirect stdout and stderr to the log file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        subprocess.run([&quot;ckan&quot;, &quot;harvester&quot;, &quot;run&quot;], stdout=log_file, stderr=log_file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Schedule the job to run every 5 minutes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schedule.every(5).minutes.do(run_harvester)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run the scheduler continuously</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while True:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    schedule.run_pending()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time.sleep(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>in your <code>.env</code> file add below lines</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CKAN__PLUGINS = harvest ckan_harvester</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CKAN__HARVEST__MQ__TYPE=redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CKAN__HARVEST__MQ__HOSTNAME=redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CKAN__HARVEST__MQ__PORT=6379</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CKAN__HARVEST__MQ__REDIS_DB=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>some of the important commands to run harvester</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 harvester.py &amp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="harvester-official-documentation">harvester official documentation<a href="#harvester-official-documentation" class="hash-link" aria-label="Direct link to harvester official documentation" title="Direct link to harvester official documentation">​</a></h3>
<p>refer this link <a href="https://github.com/ckan/ckanext-harvest#command-line-interface" target="_blank" rel="noopener noreferrer">https://github.com/ckan/ckanext-harvest#command-line-interface</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="some-above-commads-meaning">some above commads meaning:<a href="#some-above-commads-meaning" class="hash-link" aria-label="Direct link to some above commads meaning:" title="Direct link to some above commads meaning:">​</a></h3>
<ul>
<li>geather consumer: This command will gather all the harvest sources and create jobs for each of them. It will also create jobs for the harvest sources that are scheduled to run periodically.</li>
<li>fetch consumer: This command will fetch the harvest objects for each of the jobs created by the gather consumer. It will also create jobs for the harvest objects that are scheduled to run periodically.</li>
<li>Supervisor in Harvester: in Harvester supervisor is used to run the harvester in background. Supervisor is a client/server system that allows its users to monitor and control a number of processes on UNIX-like operating systems. It shares some of the same goals of programs like launchd, daemontools, and runit. Unlike some of these programs, it is not meant to be run as a substitute for init as “process id 1”. Instead it is meant to be used to control processes related to a project or a customer, and is meant to start like any other program at boot time.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-harvest-source-using-ckan-ui">creating harvest source using ckan UI<a href="#creating-harvest-source-using-ckan-ui" class="hash-link" aria-label="Direct link to creating harvest source using ckan UI" title="Direct link to creating harvest source using ckan UI">​</a></h3>
<ul>
<li>go to your ckan and login as admin then to <code>/harvest</code> page and click on <code>Add Harvest Source</code> button</li>
<li>fill the form and click on <code>save</code> button</li>
</ul>
<p>Here is an example of a configuration object (the one that must be entered in the configuration field):</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;api_version&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;default_tags&quot;: [{&quot;name&quot;: &quot;geo&quot;}, {&quot;name&quot;: &quot;namibia&quot;}],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;default_groups&quot;: [&quot;science&quot;, &quot;spend-data&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;default_extras&quot;: {&quot;encoding&quot;:&quot;utf8&quot;, &quot;harvest_url&quot;: &quot;{harvest_source_url}/dataset/{dataset_id}&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;override_extras&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;organizations_filter_include&quot;: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;organizations_filter_exclude&quot;: [&quot;remote-organization&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;user&quot;:&quot;harverster-user&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;api_key&quot;:&quot;&lt;REMOTE_API_KEY&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;read_only&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;remote_groups&quot;: &quot;only_local&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;remote_orgs&quot;: &quot;create&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>read more <a href="https://github.com/ckan/ckanext-harvest?tab=readme-ov-file#the-ckan-harvester" target="_blank" rel="noopener noreferrer">here</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/harvester/Installation.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ckan-docs/category/harvester-with-ckan"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Harvester with CKAN</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ckan-docs/category/schemming-with-ckan"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Schemming with CKAN</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#in-this-section-we-will-learn-how-to-install-and-configure-harvester-on-ckan" class="table-of-contents__link toc-highlight">in this section we will learn how to install and configure harvester on CKAN</a></li><li><a href="#what-youll-need" class="table-of-contents__link toc-highlight">What you&#39;ll need</a></li><li><a href="#installation-with-docker" class="table-of-contents__link toc-highlight">Installation with Docker</a><ul><li><a href="#harvester-official-documentation" class="table-of-contents__link toc-highlight">harvester official documentation</a></li><li><a href="#some-above-commads-meaning" class="table-of-contents__link toc-highlight">some above commads meaning:</a></li><li><a href="#creating-harvest-source-using-ckan-ui" class="table-of-contents__link toc-highlight">creating harvest source using ckan UI</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ckan-docs/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/kumarvivek1752/ckan-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 CKAN Notes, Vivek Kumar</div></div></div></footer></div>
</body>
</html>